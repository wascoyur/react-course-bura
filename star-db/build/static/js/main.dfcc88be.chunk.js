(this["webpackJsonpstar-db"]=this["webpackJsonpstar-db"]||[]).push([[0],{29:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),s=n.n(a),c=n(21),i=n.n(c),l=n(4),o=n(5),u=n(8),p=n(7),d=n(6),j=n.n(d),h=n(12),m=function(){function e(){var t=this;Object(l.a)(this,e),this._apiBase="https://swapi.dev/api/",this._imgApiBase="https://starwars-visualguide.com/assets/img/",this.getAllPeople=Object(h.a)(j.a.mark((function e(){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("people/");case 2:return n=e.sent,r=n.results.map((function(e){return t._transformPerson(e)})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),this.getPerson=function(){var e=Object(h.a)(j.a.mark((function e(n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("people/".concat(n,"/"));case 2:return r=e.sent,a=t._transformPerson(r),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getImgPerson=function(e){return"".concat(t._imgApiBase,"characters/").concat(e,".jpg")},this.getImgPlanet=function(e){return"".concat(t._imgApiBase,"planets/").concat(e,".jpg")},this.getImgSpaceShip=function(e){return"".concat(t._imgApiBase,"starships/").concat(e,".jpg")},this.getPlanet=function(){var e=Object(h.a)(j.a.mark((function e(n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("planets/".concat(n));case 2:return r=e.sent,a=t._transformPlanet(r),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllPlanets=Object(h.a)(j.a.mark((function e(){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("planets/");case 2:return n=e.sent,r=n.results.map(t._transformPlanet),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),this.getSpaceShip=function(){var e=Object(h.a)(j.a.mark((function e(n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("starships/".concat(n));case 2:return r=e.sent,a=t._transformSpaceShip(r),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._transformPlanet=function(e){var n=t._extractId(e);return{id:n,name:e.name,population:e.population,rotationPeriod:e.rotation_period,diametr:e.diameter,img:t.getImgPlanet(n)}},this._transformPerson=function(e){var n=t._extractId(e);return{id:n,name:e.name,gender:e.gender,birdYear:e.birth_year,eyeColor:e.eye_color,img:t.getImgPerson(n)}},this._transformSpaceShip=function(e){var n=t._extractId(e);return{id:t._extractId(e),name:e.name,model:e.model,manufacturer:e.manufacturer,img:t.getImgSpaceShip(n)}}}return Object(o.a)(e,[{key:"getResource",value:function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase).concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", recived ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllSpaceShips",value:function(){var e=Object(h.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("starships/");case 2:return e.sent,t=this.results.map(this._transformSpaceShip),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_extractId",value:function(e){return e.url.match(/\/([\d]*)\/$/)[1]}}]),e}(),b=(n(29),n(15)),f=function(){return Object(r.jsxs)("div",{className:"header d-flex",children:[Object(r.jsx)("h3",{children:Object(r.jsx)("a",{href:"#",children:"Star-DB"})}),Object(r.jsxs)("ul",{className:"d-flex",children:[Object(r.jsx)("li",{children:Object(r.jsx)(b.b,{to:"/people",children:"People"})}),Object(r.jsx)("li",{children:Object(r.jsx)(b.b,{to:"/planet",children:"Planets"})}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"#",children:"Starships"})})]})]})},O=(n(35),n(36),function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{class:"loadingio-spinner-double-ring-50gp1v2u54a",children:Object(r.jsxs)("div",{class:"ldio-gwirqlm4ykp",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{children:Object(r.jsx)("div",{})}),Object(r.jsx)("div",{children:Object(r.jsx)("div",{})})]})})}}]),n}(a.Component)),v=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).swapiService=new m,e.state={planet:{id:0,name:"none",population:0,rotationPeriod:0,diametr:0},loading:!0,error:!1},e.updatePlanet=function(){var t=Math.floor(19*Math.random()+2);e.swapiService.getPlanet(t).then((function(t){e.setState({planet:t,loading:!1})}))},e}return Object(o.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidMount",value:function(){this.updatePlanet(),this.interval=setInterval(this.updatePlanet,25e3)}},{key:"render",value:function(){var e=this.state,t=e.planet,n=e.loading,a=n?Object(r.jsx)(O,{}):null,s=n?null:Object(r.jsx)(g,{planet:t});return Object(r.jsxs)("div",{className:"person-details card",children:[a,s]})}}]),n}(a.Component),g=function(e){var t=e.planet,n=t.id,a=t.name,c=t.population,i=t.rotationPeriod,l=t.diametr;return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)("img",{className:"person-image",src:"https://starwars-visualguide.com/assets/img/planets/".concat(n,".jpg"),alt:""}),Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h4",{children:a}),Object(r.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(r.jsxs)("li",{className:"list-group-item",children:[Object(r.jsx)("span",{className:"term",children:"Population"}),Object(r.jsx)("span",{children:c})]}),Object(r.jsxs)("li",{className:"list-group-item",children:[Object(r.jsx)("span",{className:"term",children:"Rotation Period"}),Object(r.jsxs)("span",{children:[i," days"]})]}),Object(r.jsxs)("li",{className:"list-group-item",children:[Object(r.jsx)("span",{className:"term",children:"Diametr"}),Object(r.jsxs)("span",{children:[l," km"]})]})]})]})]})},x=v,y=(n(37),n(38),function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={itemList:null},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.getData)().then((function(t){e.setState({itemList:t})}))}},{key:"renderItems",value:function(e){var t=this;return e.map((function(e){var n=e.id,a=t.props.renderItem(e);return Object(r.jsx)("li",{className:"list-group-item",onClick:function(){return t.props.onItemSelected(n)},getData:t.props.getData,children:a},n)}))}},{key:"render",value:function(){var e=this.state.itemList;if(!e)return Object(r.jsx)(O,{});var t=this.renderItems(e);return Object(r.jsx)("ul",{className:"item-list list-group",children:t})}}]),n}(a.Component)),I=(n(39),function(e){var t=e.item,n=e.field,a=e.label;return Object(r.jsxs)("li",{className:"list-group-item",children:[Object(r.jsx)("span",{className:"term",children:a}),Object(r.jsx)("span",{children:t[n]})]})}),w=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={item:{itemId:null,name:null,gender:null,birdYear:null,eyeColor:null,img:null},loading:!0},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.updateItem()}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.updateItem(this.state.item.itemId)}},{key:"updateItem",value:function(){var e=this;this.setState({loading:!0});var t=this.props,n=t.getData,r=t.itemId;r&&n(r).then((function(t){e.setState({item:t,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=(e.loading,e.item);return Object(r.jsxs)("div",{className:"person-details card",children:[Object(r.jsx)("img",{className:"person-image",src:t.img,alt:""}),Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h4",{children:t.birdYear}),Object(r.jsx)("ul",{className:"list-group list-group-flush",children:s.a.Children.map(this.props.children,(function(e){return s.a.cloneElement(e,{item:t})}))})]})]})}}]),n}(a.Component),P=function(e){var t=e.left,n=e.right;return Object(r.jsxs)("div",{className:"row mb2",children:[Object(r.jsx)("div",{className:"col-md-6",children:t}),Object(r.jsx)("div",{className:"col-md-6",children:n})]})},k=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={selectedItem:5},e.onPlanetSelected=function(t){e.setState({selectedItem:t})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=Object(r.jsxs)(w,{getData:this.props.getData.getPlanet,itemId:this.state.selectedItem,getImgUrl:1,children:[Object(r.jsx)(I,{field:"name",label:"\u0418\u043c\u044f"}),Object(r.jsx)(I,{field:"diametr",label:"\u0414\u0438\u0430\u043c\u0435\u0442\u0440"}),Object(r.jsx)(I,{field:"population",label:"\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u0435"})]}),t=Object(r.jsx)(y,{onItemSelected:this.onPlanetSelected,getData:this.props.getData.getAllPlanets,renderItem:function(e){return"".concat(e.name)}});return Object(r.jsx)(P,{left:t,right:e})}}]),n}(a.Component),S=(n(40),function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={selectedItem:1},e.onPersonSelected=function(t){e.setState({selectedItem:t})},e}return Object(o.a)(n,[{key:"render",value:function(){this.state.hasError;var e=Object(r.jsxs)(w,{getData:this.props.getData.getPerson,itemId:this.state.selectedItem,getImgUrl:1,children:[Object(r.jsx)(I,{field:"name",label:"\u0418\u043c\u044f"}),Object(r.jsx)(I,{field:"hair_color",label:"\u0426\u0432\u0435\u0442 \u0432\u043e\u043b\u043e\u0441"})]}),t=Object(r.jsx)(y,{onItemSelected:this.onPersonSelected,getData:this.props.getData.getAllPeople,renderItem:function(e){return"".concat(e.name)}});return Object(r.jsx)(P,{left:t,right:e})}}]),n}(a.Component)),N=(n(41),n(2)),_=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={swapi:new m},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{children:Object(r.jsxs)(b.a,{children:[Object(r.jsx)(f,{}),Object(r.jsx)("div",{className:"row mb2",children:Object(r.jsx)("div",{className:"col-md-6",children:Object(r.jsx)(x,{})})}),Object(r.jsx)(N.a,{path:"/people",children:Object(r.jsx)(S,{getData:this.state.swapi})}),Object(r.jsx)(N.a,{path:"/planet",children:Object(r.jsx)(k,{getData:this.state.swapi})})]})})}}]),n}(a.Component);i.a.render(Object(r.jsx)(_,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.dfcc88be.chunk.js.map